<!DOCTYPE html>
<html><head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<title>ruote - noisy output</title>
<script src='/ruote_website/js/shCore.js'></script>
<script src='/ruote_website/js/shBrushXml.js'></script>
<script src='/ruote_website/js/shBrushBash.js'></script>
<script src='/ruote_website/js/shBrushRuby.js'></script>
<script src='/ruote_website/js/shBrushJScript.js'></script>
<!-- %script{ :src => "/js/jquery-1.6.1.min.js" } -->
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<link href='/ruote_website/css/reset.css' rel='stylesheet' type='text/css'>
<link href='/ruote_website/css/shCore.css' rel='stylesheet' type='text/css'>
<link href='/ruote_website/css/shThemeRuote.css' rel='stylesheet' type='text/css'>
<link href='/ruote_website/css/ruote.css' rel='stylesheet' type='text/css'>
</head><body>
<div id='container'>
<div id='header'>
<div id='header-center'>
<div id='header-left'>
<a href='/ruote_website'>
<img src='/ruote_website/images/ruote.png'>
</a>
<div id='header-subtitle'>
a ruby workflow engine
</div>
</div>
<div id='header-right'>
<div id='nav'>
<span>
<a href='/ruote_website/documentation.html' title='documentation'>
doc
</a>
<a href='/ruote_website/source.html' title='source code'>
source
</a>
<a href='/ruote_website/download.html' title='download'>
download
</a>
<a class='nihongo' href='/ja.html' title='日本語'>
日本語
</a>
</span>
</div>
</div>
</div>
</div>
<div id='content'>
<div id='content-center'>
<div id='sidebar'><h3 onclick='document.location = &quot;/ruote_website/documentation.html&quot;' style='cursor: pointer'>
Documentation
</h3>
<ul>
<li>
<a href='/ruote_website/common_attributes.html'>
common attributes
</a>
</li>
<li>
<a href='/ruote_website/conditions.html'>
conditions
</a>
</li>
<li>
<a href='/ruote_website/configuration.html'>
configuration
</a>
</li>
<li>
<a href='/ruote_website/documentation.html'>
documentation
</a>
</li>
<li>
<a href='/ruote_website/dollar.html'>
dollar notation
</a>
</li>
<li>
<a href='/ruote_website/download.html'>
download
</a>
</li>
<li>
<a href='/ruote_website/expressions.html'>
expressions
</a>
</li>
<li>
<a href='/ruote_website/glossary.html'>
glossary
</a>
</li>
<li>
<a href='/ruote_website/implementing_a_storage.html'>
implementing a storage
</a>
</li>
<li>
<a href='/ruote_website/implementing_participants.html'>
implementing participants
</a>
</li>
<li>
<a href='/ruote_website/lists.html'>
lists
</a>
</li>
<li class='current'>
<a href='/ruote_website/noisy.html'>
noisy output
</a>
</li>
<li>
<a href='/ruote_website/part_implementations.html'>
participant implementations
</a>
</li>
<li>
<a href='/ruote_website/presentations.html'>
presentations
</a>
</li>
<li>
<a href='/ruote_website/process_administration.html'>
process administration
</a>
</li>
<li>
<a href='/ruote_website/definitions.html'>
process definitions
</a>
</li>
<li>
<a href='/ruote_website/process_observation.html'>
process observation
</a>
</li>
<li>
<a href='/ruote_website/participants.html'>
process participants
</a>
</li>
<li>
<a href='/ruote_website/rel.html'>
rel values for ruote-http / ruote-kit links
</a>
</li>
<li>
<a href='/ruote_website/resources.html'>
resources
</a>
</li>
<li>
<a href='/ruote_website/users.html'>
ruote users
</a>
</li>
<li>
<a href='/ruote_website/sample_workflow_run.html'>
sample workflow run
</a>
</li>
<li>
<a href='/ruote_website/source.html'>
source
</a>
</li>
<li>
<a href='/ruote_website/testing_participants.html'>
testing participants
</a>
</li>
<li>
<a href='/ruote_website/testing_processes.html'>
testing processes
</a>
</li>
<li>
<a href='/ruote_website/vars_and_fields.html'>
variables and fields
</a>
</li>
<li>
<a href='/ruote_website/with_rails.html'>
with rails
</a>
</li>
<li>
<a href='/ruote_website/patterns.html'>
workflow control patterns
</a>
</li>
<li>
<a href='/ruote_website/ja.html'>
日本語
</a>
</li>
</ul>
<h3>
More
</h3>
<ul class='contact'>
<li>
<a href='https://github.com/jmettraux/ruote/tree/master/quickstart'>
quickstart
</a>
</li>
<li>
<a href='/ruote_website/presentations.html'>
presentations
</a>
</li>
<li>
<a href='/ruote_website/resources.html'>
resources
</a>
</li>
<li>
<a href='/ruote_website/users.html'>
users
</a>
</li>
</ul>
<h3>
Meta
</h3>
<ul class='contact'>
<li>
<a href='/ruote_website/source.html'>
source
</a>
</li>
<li>
<a href='/ruote_website/download.html'>
download
</a>
</li>
<li>
<a href='http://jmettraux.github.com'>
blog
</a>
</li>
<li>
<a href='/ruote_website/lists.html'>
mailing list
</a>
</li>
<li>
<a href='http://ruote-ci.s3.amazonaws.com/ci.html'>
continuous integration
</a>
</li>
<li>
<a href='http://ruote-irclogs.s3.amazonaws.com/logs.html'>
IRC
</a>
</li>
<li>
<a href='https://www.ohloh.net/p/ruote/'>
on ohloh
</a>
</li>
</ul>
<h3>
<span>
Search
</span>
</h3>
<ul class='contact'>
<li>
<form action='http://www.google.com/search' method='GET'>
<input id='qq' name='qq' style='' type='text'>
<input id='q' name='q' type='hidden'>
<input onclick='adjustSearch();' type='submit' value='search'>
</form>
</li>
</ul>
<script>
  function adjustSearch() {
    $('#q').val($('#qq').val() + ' site:http://ruote.rubyforge.org');
  }
</script>
</div>
<div id='content-main'>
<h2>&#8220;noisy&#8221; mode</h2>
<p>When testing/debugging a workflow, the <span class="caps">NOISY</span> mode might come in handy. This mode prints all the messages happening <em>locally</em> (sorry if you have more than one workers, there&#8217;ll be one different output per worker).</p>
<p>To switch it on, one has to set <em>noisy</em> to true in the Ruote::Dashboard, like in line 8 below.</p>
<p>Let&#8217;s consider this small ruote test script:</p>
<pre class="brush: ruby">
require 'pp'
require 'rufus-json/automatic'
require 'ruote'


ruote = Ruote::Dashboard.new(Ruote::Worker.new(Ruote::HashStorage.new))

ruote.noisy = ENV['NOISY'] == 'true'

ruote.register do
  alpha Ruote::StorageParticipant
end

pdef =
  Ruote.define do
    concurrence :count =&gt; 1 do
      cursor :tag =&gt; 'C1' do
        alpha :timeout =&gt; '10s'
      end
      cursor :tag =&gt; 'C2', :lose =&gt; true do
        wait '2s' # simulating 'bravo' replying before alpha
        jump :to =&gt; 'alpha', :ref =&gt; 'C1'
      end
    end
  end

wfid = ruote.launch(pdef)

ruote.wait_for(wfid)
</pre>
<p>(gist at <a href="https://gist.github.com/4332547">https://gist.github.com/4332547</a>)</p>
<p>Running it with:</p>
<pre class="brush: shell">
NOISY=true bundle exec ruby gist4332547.rb
</pre>
<p>Will output:</p>
<p><a href="/images/noisy_0.png"><img src="/images/noisy_0.png" width="664px" /></a></p>
<p>Roughly, each line is a &#8220;msg&#8221;, an event just processed by the local worker. Let&#8217;s look at a single line:</p>
<p><a href="/images/noisy_1.png"><img
  id="line2"
  src="/images/noisy_1.png"
  style="width: 664px"
/></a></p>
<p>Which can be split into</p>
<p><img src="/images/noisy_1c.png" /></p>
<p>The first block is mostly about when the msg got processed. The first number is just a counter modulo 10 for pointing at msgs more easily. The last number, right after the timestamp, is the last part of the worker instance object_id, it can be useful when debugging environments with multiple ruote workers (interleaved tests for example).</p>
<p>The second block is composed of the action code and a star. The star is just here to separate the code from the expression identifier (fei) that follows. This action code is a short version of the msg action [name]. See below for a <a href="#action_codes">list of action codes</a> and their corresponding action names.</p>
<p><span class="caps">WIP</span></p>
<h3 id="action_codes">action codes</h3>
<ul>
	<li>la: &#8220;launch&#8221;</li>
	<li>ap: &#8220;apply&#8221;</li>
	<li>re: &#8220;reply&#8221;</li>
	<li>di: &#8220;dispatch&#8221;</li>
	<li>dd: &#8220;dispatched&#8221;</li>
	<li>en: &#8220;entered_tag&#8221;</li>
	<li>le: &#8220;left_tag&#8221;</li>
	<li>ca: &#8220;cancel&#8221;</li>
	<li>dc: &#8220;dispatch_cancel&#8221;</li>
	<li>te: &#8220;terminated&#8221;</li>
	<li>ce: &#8220;ceased&#8221; (orphan terminates)</li>
	<li>va: &#8220;set_variable&#8221;</li>
</ul>
<p><span class="caps">WIP</span></p>
</div>
</div>
</div>
</div>
<div id='footer'>
<div id='footer-center'>
<p>
<span id='footer-left'>
<a href='https://github.com/jmettraux/ruote_website/issues'>doc issue reporting</a>
|
<a href='https://github.com/jmettraux/ruote_website'>doc source</a>
| created with
<a href='http://nanoc.stoneship.org'>nanoc</a>
and
<a href='http://alexgorbatchev.com/SyntaxHighlighter/'>syntax highlighter</a>
</span>
<span id='footer-right'>
&copy; 2005-2013 the ruote team
</span>
</p>
</div>
</div>
<script>
  SyntaxHighlighter.all();
</script>
</body>
</html>
