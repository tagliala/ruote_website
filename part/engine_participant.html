<!DOCTYPE html>
<html><head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<title>ruote - engine_participant</title>
<script src='/ruote_website/js/shCore.js'></script>
<script src='/ruote_website/js/shBrushXml.js'></script>
<script src='/ruote_website/js/shBrushBash.js'></script>
<script src='/ruote_website/js/shBrushRuby.js'></script>
<script src='/ruote_website/js/shBrushJScript.js'></script>
<!-- %script{ :src => "/js/jquery-1.6.1.min.js" } -->
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<link href='/ruote_website/css/reset.css' rel='stylesheet' type='text/css'>
<link href='/ruote_website/css/shCore.css' rel='stylesheet' type='text/css'>
<link href='/ruote_website/css/shThemeRuote.css' rel='stylesheet' type='text/css'>
<link href='/ruote_website/css/ruote.css' rel='stylesheet' type='text/css'>
</head><body>
<div id='container'>
<div id='header'>
<div id='header-center'>
<div id='header-left'>
<a href='/ruote_website'>
<img src='/ruote_website/images/ruote.png'>
</a>
<div id='header-subtitle'>
a ruby workflow engine
</div>
</div>
<div id='header-right'>
<div id='nav'>
<span>
<a href='/ruote_website/documentation.html' title='documentation'>
doc
</a>
<a href='/ruote_website/source.html' title='source code'>
source
</a>
<a href='/ruote_website/download.html' title='download'>
download
</a>
<a class='nihongo' href='/ja.html' title='日本語'>
日本語
</a>
</span>
</div>
</div>
</div>
</div>
<div id='content'>
<div id='content-center'>
<div id='sidebar'><h3 onclick='document.location = &quot;/ruote_website/documentation.html&quot;' style='cursor: pointer'>
Documentation
</h3>
<ul>
<li>
<a href='/ruote_website/part/block_participant.html'>
block_participant
</a>
</li>
<li>
<a href='/ruote_website/part/code_participant.html'>
code_participant
</a>
</li>
<li>
<a href='/ruote_website/part/decision_participant.html'>
decision_participant
</a>
</li>
<li class='current'>
<a href='/ruote_website/part/engine_participant.html'>
engine_participant
</a>
</li>
<li>
<a href='/ruote_website/part/local_participant.html'>
local_participant
</a>
</li>
<li>
<a href='/ruote_website/part/no_op_participant.html'>
no_op_participant
</a>
</li>
<li>
<a href='/ruote_website/part/null_participant.html'>
null_participant
</a>
</li>
<li>
<a href='/ruote_website/part/rev_participant.html'>
rev_participant
</a>
</li>
<li>
<a href='/ruote_website/part/smtp_participant.html'>
smtp_participant
</a>
</li>
<li>
<a href='/ruote_website/part/storage_participant.html'>
storage_participant
</a>
</li>
</ul>
<h3>
More
</h3>
<ul class='contact'>
<li>
<a href='https://github.com/jmettraux/ruote/tree/master/quickstart'>
quickstart
</a>
</li>
<li>
<a href='/ruote_website/presentations.html'>
presentations
</a>
</li>
<li>
<a href='/ruote_website/resources.html'>
resources
</a>
</li>
<li>
<a href='/ruote_website/users.html'>
users
</a>
</li>
</ul>
<h3>
Meta
</h3>
<ul class='contact'>
<li>
<a href='/ruote_website/source.html'>
source
</a>
</li>
<li>
<a href='/ruote_website/download.html'>
download
</a>
</li>
<li>
<a href='http://jmettraux.github.com'>
blog
</a>
</li>
<li>
<a href='/ruote_website/lists.html'>
mailing list
</a>
</li>
<li>
<a href='http://ruote-ci.s3.amazonaws.com/ci.html'>
continuous integration
</a>
</li>
<li>
<a href='http://ruote-irclogs.s3.amazonaws.com/logs.html'>
IRC
</a>
</li>
<li>
<a href='https://www.ohloh.net/p/ruote/'>
on ohloh
</a>
</li>
</ul>
<h3>
<span>
Search
</span>
</h3>
<ul class='contact'>
<li>
<form action='http://www.google.com/search' method='GET'>
<input id='qq' name='qq' style='' type='text'>
<input id='q' name='q' type='hidden'>
<input onclick='adjustSearch();' type='submit' value='search'>
</form>
</li>
</ul>
<script>
  function adjustSearch() {
    $('#q').val($('#qq').val() + ' site:http://ruote.rubyforge.org');
  }
</script>
</div>
<div id='content-main'>
<h2>engine_participant</h2>
<p>A participant for pushing the execution of [segments of] processes to<br />
other engines.</p>
<p>It works by giving the participant the connection information to the storage<br />
of the other engine.</p>
<p>For instance :</p>
<pre class="brush: ruby">
  engine0 =
    Ruote::Engine.new(
      Ruote::Worker.new(
        Ruote::FsStorage.new('work0', 'engine_id' =&gt; 'engine0')))
  engine1 =
    Ruote::Engine.new(
      Ruote::Worker.new(
        Ruote::FsStorage.new('work1', 'engine_id' =&gt; 'engine1')))

  engine0.register_participant('engine1',
    Ruote::EngineParticipant,
    'storage_class' =&gt; Ruote::FsStorage,
    'storage_path' =&gt; 'ruote/storage/fs_storage',
    'storage_args' =&gt; 'work1')
  engine1.register_participant('engine0',
    Ruote::EngineParticipant,
    'storage_class' =&gt; Ruote::FsStorage,
    'storage_path' =&gt; 'ruote/storage/fs_storage',
    'storage_args' =&gt; 'work0')
</pre>
<p>In this example, two engines are created (note that their &#8216;engine_id&#8217; is<br />
explicitely set (else it would default to &#8216;engine&#8217;)). Each engine is then<br />
registered as participant in the other engine. The registration parameters<br />
detail the class and the arguments to the storage of the target engine.</p>
<p>This example is a bit dry / flat. A real world example would perhaps detail<br />
a &#8216;master&#8217; engine connected to &#8216;departmental&#8217; engines, something more<br />
hierarchical.</p>
<p>The example also binds reciprocally engines. If the delegated processes<br />
are always &#8216;forgotten&#8217;, one could imagine not binding the source engine<br />
as a participant in the target engine (not need to answer back).</p>
<p>There are then two variants for calling a subprocess</p>
<pre class="brush: ruby">
  subprocess :ref =&gt; 'subprocess_name', :engine =&gt; 'engine1'
    # or
  participant :ref =&gt; 'engine1', :pdef =&gt; 'subprocess_name'
</pre>
<p>It&#8217;s OK to go for the shorter versions :</p>
<pre class="brush: ruby">
  subprocess_name :engine =&gt; 'engine1'
    # or
  participant 'engine1', :pdef =&gt; 'subprocess_name'
  engine1 :pdef =&gt; 'subprocess_name'
</pre>
<p>The subprocess is defined in the current process, or it&#8217;s given via its<br />
<span class="caps">URL</span>. The third variant is a subprocess bound as an engine variable.</p>
<pre class="brush: ruby">
  engine.variables['variant_3'] = Ruote.process_definition do
    participant 'hello_world_3'
  end

  pdef = Ruote.process_definition do
    sequence do
      engine1 :pdef =&gt; 'variant_1'
      engine1 :pdef =&gt; 'http://pdefs.example.com/variant_2.rb'
      engine1 :pdef =&gt; 'variant_3'
    end
    define 'variant_1' do
      participant 'hello_world_1'
    end
  end
</pre>
</div>
</div>
</div>
</div>
<div id='footer'>
<div id='footer-center'>
<p>
<span id='footer-left'>
<a href='https://github.com/jmettraux/ruote_website/issues'>doc issue reporting</a>
|
<a href='https://github.com/jmettraux/ruote_website'>doc source</a>
| created with
<a href='http://nanoc.stoneship.org'>nanoc</a>
and
<a href='http://alexgorbatchev.com/SyntaxHighlighter/'>syntax highlighter</a>
</span>
<span id='footer-right'>
&copy; 2005-2013 the ruote team
</span>
</p>
</div>
</div>
<script>
  SyntaxHighlighter.all();
</script>
</body>
</html>
